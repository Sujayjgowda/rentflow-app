<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RentFlow — Smart Rent Management</title>
  <meta name="description"
    content="Comprehensive rent management application for landlords and tenants. Track payments, manage properties, and generate reports.">

  <!-- PWA Meta Tags -->
  <meta name="theme-color" content="#6366f1">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="RentFlow">
  <meta name="application-name" content="RentFlow">
  <meta name="msapplication-TileColor" content="#6366f1">
  <meta name="msapplication-TileImage" content="/icons/icon-144.png">

  <!-- PWA Manifest -->
  <link rel="manifest" href="/manifest.json">

  <!-- App Icons -->
  <link rel="icon" type="image/png" sizes="192x192" href="/icons/icon-192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/icon-96.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/icons/icon-152.png">
  <link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192.png">
  <link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512.png">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
    rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,1,0"
    rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.4/dist/chart.umd.min.js"></script>
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <!-- Auth Screen -->
  <div id="auth-screen" class="auth-screen">
    <div class="auth-bg-shapes">
      <div class="shape shape-1"></div>
      <div class="shape shape-2"></div>
      <div class="shape shape-3"></div>
    </div>
    <div class="auth-container">
      <div class="auth-brand">
        <div class="brand-icon">
          <span class="material-symbols-rounded">apartment</span>
        </div>
        <h1>RentFlow</h1>
        <p>Smart Rent Management</p>
      </div>
      <div class="auth-card glass-card">
        <div class="auth-tabs">
          <button class="auth-tab active" data-tab="login" id="login-tab">Login</button>
          <button class="auth-tab" data-tab="register" id="register-tab">Register</button>
        </div>

        <!-- Login Form -->
        <form id="login-form" class="auth-form">
          <div class="form-group">
            <span class="material-symbols-rounded input-icon">email</span>
            <input type="email" id="login-email" placeholder="Email address" required autocomplete="email">
          </div>
          <div class="form-group">
            <span class="material-symbols-rounded input-icon">lock</span>
            <input type="password" id="login-password" placeholder="Password" required autocomplete="current-password">
          </div>
          <button type="submit" class="btn btn-primary btn-full" id="login-btn">
            <span>Sign In</span>
            <span class="material-symbols-rounded">arrow_forward</span>
          </button>
        </form>

        <!-- Register Form -->
        <form id="register-form" class="auth-form hidden">
          <div class="form-group">
            <span class="material-symbols-rounded input-icon">person</span>
            <input type="text" id="reg-name" placeholder="Full name" required>
          </div>
          <div class="form-group">
            <span class="material-symbols-rounded input-icon">email</span>
            <input type="email" id="reg-email" placeholder="Email address" required>
          </div>
          <div class="form-group">
            <span class="material-symbols-rounded input-icon">lock</span>
            <input type="password" id="reg-password" placeholder="Password (min 6 chars)" required minlength="6">
          </div>
          <div class="form-group">
            <span class="material-symbols-rounded input-icon">phone</span>
            <input type="tel" id="reg-phone" placeholder="Phone (optional)">
          </div>
          <div class="role-selector">
            <label class="role-option">
              <input type="radio" name="role" value="landlord" checked>
              <div class="role-card">
                <span class="material-symbols-rounded">domain</span>
                <span>Landlord</span>
              </div>
            </label>
            <label class="role-option">
              <input type="radio" name="role" value="tenant">
              <div class="role-card">
                <span class="material-symbols-rounded">person</span>
                <span>Tenant</span>
              </div>
            </label>
          </div>
          <button type="submit" class="btn btn-primary btn-full" id="register-btn">
            <span>Create Account</span>
            <span class="material-symbols-rounded">arrow_forward</span>
          </button>
        </form>

        <div id="auth-error" class="auth-error hidden"></div>
      </div>
    </div>
  </div>

  <!-- Main App Shell -->
  <div id="app-shell" class="app-shell hidden">
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <div class="brand-icon small">
          <span class="material-symbols-rounded">apartment</span>
        </div>
        <span class="brand-name">RentFlow</span>
        <button class="sidebar-toggle" id="sidebar-toggle">
          <span class="material-symbols-rounded">menu</span>
        </button>
      </div>

      <nav class="sidebar-nav" id="sidebar-nav">
        <!-- Navigation items injected by JS based on role -->
      </nav>

      <div class="sidebar-user" id="sidebar-user">
        <!-- User info injected by JS -->
      </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content" id="main-content">
      <header class="top-bar" id="top-bar">
        <button class="mobile-menu-btn" id="mobile-menu-btn">
          <span class="material-symbols-rounded">menu</span>
        </button>
        <div class="top-bar-title" id="page-title">Dashboard</div>
        <div class="top-bar-actions" id="top-bar-actions"></div>
      </header>
      <div class="content-area" id="content-area">
        <!-- Dynamic content rendered here -->
      </div>
    </main>
  </div>

  <!-- Toast Container -->
  <div id="toast-container" class="toast-container"></div>

  <!-- Modal Container -->
  <div id="modal-overlay" class="modal-overlay hidden">
    <div class="modal" id="modal">
      <div class="modal-header" id="modal-header"></div>
      <div class="modal-body" id="modal-body"></div>
      <div class="modal-footer" id="modal-footer"></div>
    </div>
  </div>

  <script src="app.js"></script>
  <script>
    // Register Service Worker for PWA
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
          .then(reg => console.log('✅ Service Worker registered:', reg.scope))
          .catch(err => console.warn('⚠️ Service Worker registration failed:', err));
      });
    }
  </script>
</body>

</html>